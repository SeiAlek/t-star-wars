(this["webpackJsonpstar-wars"]=this["webpackJsonpstar-wars"]||[]).push([[0],{133:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(11),c=n.n(a),i=n(66),s=(n(133),n(14)),l=n(105),o=n(73),u=n(53),d=n(43),j=n.n(d),p=n(61),b=n(19),f=n(96),h=n.n(f),m=n(29),O=n(71),v=function(e,t){return e.reduce((function(e,n){return Object(m.a)(Object(m.a)({},e),{},Object(O.a)({},"".concat(n[t]),n))}),{})},x=function(e){var t=e.people,n=e.films,r=e.starships,a=e.species,c=v(n,"url"),i=v(r,"url"),s=v(a,"url");return t.map((function(e){var t=e.films.map((function(e){return{id:c[e].id,title:c[e].title,releaseDate:c[e].releaseDate}})).sort((function(e,t){return new Date(e.releaseDate).getTime()-new Date(t.releaseDate).getTime()})),n=e.starships.map((function(e){return{id:i[e].id,name:i[e].name}})),r=e.species.map((function(e){return{id:s[e].id,name:s[e].name}}));return Object(m.a)(Object(m.a)({},e),{},{films:t,starships:n||null,species:r||null})}))},g=function(e){if(!e)return null;var t=new URL(e);return new URLSearchParams(t.search).get("page")||null},S=function(e){var t=e.toUpperCase(),n=t.replace(/[^\d]/gi,""),r=t.replace(/[^ABY]/gi,"");return"".concat(n).concat(r?" ".concat(r):"")},Y=function(e){return{year:+e.replace(/[^\d]/gi,""),era:e.replace(/[^ABY]/gi,"")}},D=function(e,t){var n=Y(e),r=Y(t);return n.era===r.era&&n.year===r.year?0:"BBY"===n.era&&"ABY"===r.era?-1:"BBY"===n.era&&"BBY"===r.era?n.year>r.year?-1:1:"ABY"===n.era&&"ABY"===r.era?n.year>r.year?1:-1:null},R=function(e){var t=Y(e);return("BBY"===t.era||"ABY"===t.era)&&!(t.year<0)},C=h.a.create({baseURL:"https://swapi.dev/api",timeout:6e4}),B=function(){var e=Object(p.a)(j.a.mark((function e(t){var n,r,a,c,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,C.get("/".concat(t));case 3:r=e.sent,a=r.data,n.push.apply(n,Object(u.a)(a.results)),c=g(a.next);case 7:if(!c){e.next=16;break}return e.next=10,C.get("/".concat(t,"?page=").concat(c));case 10:i=e.sent,s=i.data,c=g(s.next),n.push.apply(n,Object(u.a)(s.results)),e.next=7;break;case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=n(205),k=n(217),N=n(215),W=n(219),w=n(220),F=n(221),A=n(208),P=n(54),E=n(103),T=n.n(E),I=n(102),L=n.n(I),M=n(163),U=n(206),z=n(3),J=Object(y.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff",marginTop:0}}})),_=function(e){var t=e.isOpen,n=e.handleClose,r=J();return Object(z.jsx)(M.a,{className:r.backdrop,open:t,onClick:n,children:Object(z.jsx)(U.a,{color:"inherit"})})};_.defaultProps={isOpen:!1,handleClose:null};var q=Object(r.memo)(_),G=n(106),H=n(5),V=n(213),K=n(211),Q=n(207),X=n(209),Z=n(210),$=n(97),ee=n.n($),te=Object(H.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,r=e.onClose,a=Object(G.a)(e,["children","classes","onClose"]);return Object(z.jsxs)(Q.a,Object(m.a)(Object(m.a)({disableTypography:!0,className:n.root},a),{},{children:[Object(z.jsx)(P.a,{variant:"h6",children:t}),r?Object(z.jsx)(A.a,{"aria-label":"close",className:n.closeButton,onClick:r,children:Object(z.jsx)(ee.a,{})}):null]}))})),ne=Object(H.a)((function(e){return{root:{padding:e.spacing(2)}}}))(X.a),re=Object(H.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Z.a),ae=function(e){var t=e.children,n=e.title,r=e.button,a=e.handleClose,c=e.handleAction;return Object(z.jsxs)(K.a,{onClose:a,open:!0,children:[Object(z.jsx)(te,{onClose:a,children:n}),Object(z.jsx)(ne,{dividers:!0,children:t}),c&&r&&Object(z.jsx)(re,{children:Object(z.jsx)(V.a,{autoFocus:!0,onClick:a,color:"primary",children:r})})]})};ae.defaultProps={button:null,handleAction:null};var ce=Object(r.memo)(ae),ie=n(227),se=Object(y.a)((function(){return{root:{width:"100%",minWidth:320,maxWidth:600},title:{fontWeight:600}}})),le=function(e){var t=e.person,n=se();return Object(z.jsxs)("div",{className:n.root,children:[Object(z.jsxs)(ie.a,{mb:2,children:[Object(z.jsx)(P.a,{component:"span",className:n.title,children:"Born: "}),Object(z.jsx)(P.a,{component:"span",children:t.birthYear})]}),!!t.species.length&&Object(z.jsxs)(ie.a,{mb:2,children:[Object(z.jsx)(P.a,{component:"span",className:n.title,children:"Species: "}),Object(z.jsx)(P.a,{component:"span",children:"".concat(t.species.map((function(e){return e.name})).join(", "))})]}),Object(z.jsxs)(ie.a,{mb:2,children:[Object(z.jsx)(P.a,{component:"span",className:n.title,children:"Movies: "}),Object(z.jsx)(P.a,{component:"span",children:t.films.map((function(e){var t=e.title,n=e.releaseDate;return"".concat(t," (").concat(new Date(n).getFullYear(),")")})).join(", ")})]}),!!t.starships.length&&Object(z.jsxs)(ie.a,{mb:2,children:[Object(z.jsx)(P.a,{component:"span",className:n.title,children:"Starships: "}),Object(z.jsx)(P.a,{component:"span",children:t.starships.map((function(e){return e.name})).join(", ")})]})]})};le.defaultProps={person:null};var oe=Object(r.memo)(le),ue=n(110),de=n(218),je=n(230),pe=n(226),be=n(214),fe=n(216),he=n(228),me=n(98),Oe=n.n(me),ve=n(99),xe=n.n(ve),ge=Object(y.a)((function(e){return{root:{"& > * + *":{marginTop:e.spacing(3)}}}})),Se=function(e){var t=e.id,n=e.name,a=e.value,c=e.options,i=e.label,s=e.placeholder,l=e.limitTags,o=e.variant,u=e.handleSelect,d=ge(),j=Object(r.useRef)((function(e){return e.title||e.name})),p=Object(r.useRef)((function(e,t){return e===t})),b=Object(r.useRef)((function(e){return Object(z.jsx)(pe.a,Object(m.a)(Object(m.a)({},e),{},{variant:o,label:i,placeholder:s}))})),f=Object(r.useRef)((function(e,t){var n=t.inputValue,r=xe()(e.title,n),a=Oe()(e.title,r);return Object(z.jsx)("div",{children:a.map((function(e){return Object(z.jsx)("span",{style:{fontWeight:e.highlight?700:400},children:e.text},e.text)}))})})),h=Object(r.useRef)((function(e,t){return u(e,t,n)}));return Object(z.jsx)("div",{className:d.root,children:Object(z.jsx)(he.a,{id:t,name:n,value:a,options:c,fullWidth:!0,multiple:!0,filterSelectedOptions:!0,limitTags:l,onChange:h.current,getOptionLabel:j.current,getOptionSelected:p.current,renderInput:b.current,renderOption:f.current})})};Se.defaultProps={value:[],label:"",placeholder:"",limitTags:1,variant:"outlined"};var Ye=Object(r.memo)(Se),De=Object(y.a)((function(e){return{root:{},formWrapper:{paddingTop:e.spacing(4)},fieldWrapper:{padding:e.spacing(0,2,4)}}})),Re=function(e){var t=e.films,n=e.species,r=e.selectedFilms,a=e.selectedSpecies,c=e.startYear,i=e.endYear,s=e.isRelationshipAnd,l=e.handleChange,o=De();return Object(z.jsx)(ue.a,{elevation:3,className:o.root,children:Object(z.jsxs)(k.a,{container:!0,className:o.formWrapper,children:[Object(z.jsx)(k.a,{item:!0,className:o.fieldWrapper,xs:12,children:Object(z.jsx)(de.a,{control:Object(z.jsx)(je.a,{checked:s,onChange:l,color:"primary",name:"isRelationshipAnd",inputProps:{"aria-label":"primary checkbox"}}),label:s?"Relative all selected fields":"Relative one of selected fields"})}),Object(z.jsx)(k.a,{item:!0,className:o.fieldWrapper,xs:12,children:t&&Object(z.jsx)(Ye,{id:"films-autocomplete-field",name:"films",options:t,value:r,label:"Movies",handleSelect:l})}),Object(z.jsx)(k.a,{item:!0,className:o.fieldWrapper,xs:12,children:n&&Object(z.jsx)(Ye,{id:"species-autocomplete-field",name:"species",options:n,value:a,label:"Species",handleSelect:l})}),Object(z.jsx)(k.a,{item:!0,className:o.fieldWrapper,xs:12,children:Object(z.jsx)(be.a,{fullWidth:!0,children:Object(z.jsx)(pe.a,{name:"startYear",value:c,label:"Start Year",variant:"outlined",fullWidth:!0,onChange:l})})}),Object(z.jsx)(k.a,{item:!0,className:o.fieldWrapper,xs:12,children:Object(z.jsxs)(be.a,{fullWidth:!0,children:[Object(z.jsx)(pe.a,{name:"endYear",value:i,label:"End Year",fullWidth:!0,variant:"outlined",onChange:l}),Object(z.jsx)(fe.a,{variant:"outlined",children:"For example: 112 BBY"})]})})]})})};Re.defaultProps={selectedFilms:[],selectedSpecies:[],startYear:"",endYear:"",isRelationshipAnd:!1};var Ce=Object(r.memo)(Re),Be=n(101),ye=n.n(Be),ke=Object(y.a)((function(e){return{root:{minHeight:300,padding:e.spacing(2)}}})),Ne=function(e){var t=e.favorites,n=e.handleClick,r=e.handleDrop,a=e.handleDragEnter,c=e.handleDragOver,i=e.handleRemove,s=ke();return Object(z.jsxs)(ue.a,{id:"favorites",elevation:3,className:s.root,onDrop:r,onDragEnter:a,onDragOver:c,children:[Object(z.jsx)(P.a,{variant:"h6",align:"center",children:"Favorites"}),Object(z.jsx)(N.a,{dense:!0,children:null===t||void 0===t?void 0:t.map((function(e){return Object(z.jsxs)(W.a,{id:e.id,button:!0,component:"li",onClick:n,children:[Object(z.jsx)(w.a,{primary:e.name}),Object(z.jsx)(F.a,{className:s.button,children:Object(z.jsx)(A.a,{edge:"start",id:e.id,onClick:i,children:Object(z.jsx)(ye.a,{fontSize:"small"})})})]},e.id)}))}),Object(z.jsx)(P.a,{variant:"body2",align:"center",children:"Drag and drop characters to add them to Favorites"})]})};Ne.defaultProps={favorites:null};var We=Object(r.memo)(Ne),we=Object(y.a)((function(){return{root:{width:"100%"},favorite:{color:L.a[500]}}})),Fe=function(e){var t=e.isLoading,n=e.people,r=e.favorites,a=e.films,c=e.species,i=e.selectedPerson,s=e.selectedFilms,l=e.selectedSpecies,o=e.startYear,u=e.endYear,d=e.isRelationshipAnd,j=e.handleSelectPerson,p=e.handleChange,b=e.handleDragEnter,f=e.handleDragOver,h=e.handleDrop,m=e.handleDragEnd,O=e.handleRemoveFromFavorites,v=we();return Object(z.jsxs)("div",{className:v.root,children:[Object(z.jsxs)(k.a,{container:!0,spacing:3,children:[Object(z.jsx)(k.a,{item:!0,xs:12,sm:6,children:Object(z.jsxs)(k.a,{container:!0,direction:"row",spacing:3,children:[Object(z.jsx)(k.a,{item:!0,xs:12,children:a&&c&&Object(z.jsx)(Ce,{films:a,species:c,selectedFilms:s,selectedSpecies:l,startYear:o,endYear:u,isRelationshipAnd:d,handleChange:p})}),Object(z.jsx)(k.a,{item:!0,xs:12,children:a&&Object(z.jsx)(We,{favorites:r,handleClick:j,handleDragEnter:b,handleDragOver:f,handleDrop:h,handleRemove:O})})]})}),Object(z.jsxs)(k.a,{item:!0,xs:12,sm:6,children:[Object(z.jsx)(N.a,{dense:!0,children:null===n||void 0===n?void 0:n.map((function(e){return Object(z.jsxs)(W.a,{id:e.id,button:!0,component:"li",onClick:j,draggable:!0,onDragEnd:m,children:[Object(z.jsx)(w.a,{primary:e.name}),r.some((function(t){return t.id===e.id}))&&Object(z.jsx)(F.a,{children:Object(z.jsx)(A.a,{edge:"end","aria-label":"favorites",className:v.favorite,children:Object(z.jsx)(T.a,{color:"inherit"})})})]},e.id)}))}),0===(null===n||void 0===n?void 0:n.length)&&Object(z.jsx)(P.a,{variant:"h6",align:"center",children:"Characters not found..."})]})]}),i&&Object(z.jsx)(ce,{title:i.name,handleClose:j,children:Object(z.jsx)(oe,{person:i})}),Object(z.jsx)(q,{isOpen:t})]})};Fe.defaultProps={isLoading:!1,people:null,favorites:null,films:null,species:null,selectedPerson:null,selectedFilms:[],selectedSpecies:[],startYear:"",endYear:"",isRelationshipAnd:!1};var Ae=Object(r.memo)(Fe);var Pe=function(){var e=Object(o.b)().enqueueSnackbar,t=Object(r.useState)(),n=Object(b.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(),s=Object(b.a)(i,2),l=s[0],d=s[1],f=Object(r.useState)(),h=Object(b.a)(f,2),m=h[0],O=h[1],v=Object(r.useState)(),g=Object(b.a)(v,2),Y=g[0],C=g[1],y=Object(r.useState)(),k=Object(b.a)(y,2),N=k[0],W=k[1],w=Object(r.useState)(!0),F=Object(b.a)(w,2),A=F[0],P=F[1],E=Object(r.useState)([]),T=Object(b.a)(E,2),I=T[0],L=T[1],M=Object(r.useState)([]),U=Object(b.a)(M,2),J=U[0],_=U[1],q=Object(r.useState)(""),G=Object(b.a)(q,2),H=G[0],V=G[1],K=Object(r.useState)(""),Q=Object(b.a)(K,2),X=Q[0],Z=Q[1],$=Object(r.useState)([]),ee=Object(b.a)($,2),te=ee[0],ne=ee[1],re=Object(r.useState)(),ae=Object(b.a)(re,2),ce=ae[0],ie=ae[1],se=Object(r.useState)(),le=Object(b.a)(se,2),oe=le[0],ue=le[1],de=Object(r.useRef)((function(e,t,n){return e[n].some((function(e){var n=e.id;return t===n}))})),je=Object(r.useMemo)((function(){return I.length>0?null===a||void 0===a?void 0:a.filter((function(e){return I.every((function(t){var n=t.id;return de.current(e,n,"films")}))})):a}),[I,a]),pe=Object(r.useMemo)((function(){return J.length>0?null===je||void 0===je?void 0:je.filter((function(e){return J.every((function(t){var n=t.id;return de.current(e,n,"species")}))})):je}),[J,je]),be=Object(r.useMemo)((function(){var e=R(H)?H:"999999 BBY",t=R(X)?X:"999999 ABY";return null===pe||void 0===pe?void 0:pe.filter((function(n){var r=D(n.birthYear,e)>=0,a=D(t,n.birthYear)>=0;return n.birthYear&&r&&a}))}),[pe,H,X]),fe=Object(r.useMemo)((function(){if(A)return be;var e=R(H)?H:"999999 BBY",t=R(X)?X:"999999 ABY";return a.filter((function(n){var r=I.some((function(e){return de.current(n,e.id,"films")})),a=J.some((function(e){return de.current(n,e.id,"species")})),c=D(n.birthYear,e)>=0,i=D(t,n.birthYear)>=0;return[r,a,n.birthYear&&c&&i].some(Boolean)}))}),[a,A,J,I,H,X,be]),he=Object(r.useMemo)((function(){var e=null===a||void 0===a?void 0:a.find((function(e){return e.id===N}));return e||null}),[a,N]),me=Object(r.useRef)(Object(p.a)(j.a.mark((function t(){var n,r,a,c,i,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,C(!0),t.next=4,Promise.all([B("people").then((function(e){return e.map((function(e){return{id:e.url.replace(/\D/gi,""),name:e.name,birthYear:S(e.birth_year),films:e.films,species:e.species,starships:e.starships,url:e.url}}))})),B("films").then((function(e){return e.map((function(e){var t=e.title,n=e.release_date,r=e.url;return{id:r.replace(/\D/gi,""),title:t,releaseDate:n,url:r}}))})),B("starships").then((function(e){return e.map((function(e){var t=e.name,n=e.url;return{id:n.replace(/\D/gi,""),name:t,title:t,url:n}}))})),B("species").then((function(e){return e.map((function(e){var t=e.name,n=e.url;return{id:n.replace(/\D/gi,""),name:t,title:t,url:n}}))}))]);case 4:return n=t.sent,r=Object(b.a)(n,4),a=r[0],c=r[1],i=r[2],s=r[3],t.abrupt("return",{peopleWithLinks:a,fetchedFilms:c,fetchedStarships:i,fetchedSpecies:s});case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",e(t.t0.message,{variant:"error"}));case 16:return t.prev=16,C(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])})))),Oe=Object(r.useRef)(Object(p.a)(j.a.mark((function e(){var t,n,r,a,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.current();case 2:t=e.sent,n=t.peopleWithLinks,r=t.fetchedFilms,a=t.fetchedStarships,i=t.fetchedSpecies,s=x({people:n,films:r,starships:a,species:i}),c(s),d(r),O(i);case 11:case"end":return e.stop()}}),e)}))));Object(r.useEffect)((function(){Oe.current()}),[]),Object(r.useEffect)((function(){var e=localStorage.getItem("favorites"),t=null===e||void 0===e?void 0:e.split(",");if((null===t||void 0===t?void 0:t.length)&&a){var n=a.filter((function(e){var n=e.id;return t.includes(n)}));ne(n)}}),[a]);var ve=Object(r.useRef)((function(e){var t=e.currentTarget.id;W(t)})),xe=Object(r.useRef)((function(e,t,n){var r=n||e.target.name,a=t||e.target.value,c={films:function(){return L(a)},species:function(){return _(a)},isRelationshipAnd:function(){return P((function(e){return!e}))},startYear:function(){return V(S(a))},endYear:function(){return Z(S(a))}};c[r]&&c[r]()})),ge=Object(r.useCallback)((function(t){var n=t.currentTarget.id,r=localStorage.getItem("favorites"),c=a.find((function(e){return e.id===n}));ne((function(e){return e.filter((function(e){return e.id!==n}))}));var i=r.split(",").filter((function(e){return e!==n})).join();localStorage.setItem("favorites",i),e("".concat(c.name," removed from favorites"),{variant:"success"})}),[e,a]);Object(r.useEffect)((function(){"favorites"===ce&&oe&&function(t){var n=localStorage.getItem("favorites"),r=(null===n||void 0===n?void 0:n.split(","))||[],c=a.find((function(e){return e.id===t}));!(null===r||void 0===r?void 0:r.includes(t))&&c&&(localStorage.setItem("favorites",[].concat(Object(u.a)(r),[t])),ne((function(e){return[].concat(Object(u.a)(e),[c]).sort((function(e,t){return e-t}))})),e("".concat(c.name," added to favorites"),{variant:"success"}))}(oe)}),[oe,ce]);var Se=Object(r.useRef)((function(){})),Ye=Object(r.useRef)((function(e){e.stopPropagation(),e.preventDefault()})),De=Object(r.useRef)((function(e){e.preventDefault();var t=e.currentTarget.id;ie(t)})),Re=Object(r.useRef)((function(e){e.preventDefault();var t=e.target.id;ue(t)}));return Object(z.jsx)(Ae,{isLoading:Y,people:fe,favorites:te,films:l,species:m,selectedPerson:he,selectedFilms:I,selectedSpecies:J,startYear:H,endYear:X,isRelationshipAnd:A,handleSelectPerson:ve.current,handleChange:xe.current,handleDragEnter:Se.current,handleDragOver:Ye.current,handleDrop:De.current,handleDragEnd:Re.current,handleRemoveFromFavorites:ge})},Ee=function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(s.c,{children:Object(z.jsx)(s.a,{path:"/",exact:!0})}),Object(z.jsx)(s.c,{children:Object(z.jsx)(s.a,{path:"/",exact:!0,component:Pe})})]})},Te=n(224),Ie=n(225),Le=n(222),Me=n(223),Ue=Object(y.a)((function(){return{root:{flexGrow:1}}})),ze=function(e){var t=e.title,n=Ue();return Object(z.jsx)(Le.a,{position:"fixed",className:n.root,children:Object(z.jsx)(Me.a,{children:Object(z.jsx)(P.a,{className:n.title,variant:"h6",noWrap:!0,children:t})})})},Je=Object(r.memo)(ze),_e=function(e){var t=e.children;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(Je,{title:"Star Wars Characters"}),Object(z.jsx)(Te.a,{}),Object(z.jsx)(Ie.a,{maxWidth:"lg",children:Object(z.jsx)(ie.a,{mt:12,children:t})})]})};_e.defaultProps={children:null};var qe=_e,Ge=function(){return Object(z.jsx)(l.a,{ReactRouterRoute:s.a,children:Object(z.jsx)(o.a,{children:Object(z.jsx)(qe,{children:Object(z.jsx)(Ee,{})})})})};c.a.render(Object(z.jsx)(i.a,{children:Object(z.jsx)(Ge,{})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.3bcfb23b.chunk.js.map